<tool id="icfree_plates_generator" name="iCFree plates generator module" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="21.09">
    <description>Generates a list of Echo-compatible source and destination plates according a set of samples to test</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <stdio>
        <regex match="WARNING" level="warning" />
        <regex match="ERROR" level="fatal" />
    </stdio>
    <command detect_errors="exit_code"><![CDATA[
        python -m icfree.plates_generator
            '$cfps_parameters_file'
            '$sampling_file'
            --sample_volume '$adv.sample_volume'
            --source_plate_dead_volume '$adv.source_plate_dead_volume'
            --dest_plate_dead_volume '$adv.dest_plate_dead_volume'
            --dest-starting_well '$adv.dest-starting_well'
            --src-starting_well '$adv.src-starting_well'
            --output-format '$adv.output-format'
            --nplicate '$adv.nplicate'
            --keep-nil-vol '$adv.keep-nil-vol'
            --source_plate_well_capacity '$adv.source_plate_well_capacity'
            --dest_plate_well_capacity '$adv.dest_plate_well_capacity'
            --optimize-well-volumes '$adv.optimize-well-volumes'
            --plate-dimensions '$adv.plate-dimensions'
    ]]></command>
    <inputs>
        <param name="cfps_parameters_file" type="data" format="tabular" label="Cell-Free System Pameters" />
        <param name="sampling_file" type="data" format="csv" label="Cell-Free System Pameters Concentrations" />
        <section name="adv" title="Advanced Options" expanded="false">
            <param argument="sample_volume" type="integer" value="1000" label="Final sample volume in each well in nL" />
            <param argument="source_plate_dead_volume" type="integer" value="15000" label="dead volume to add in the source plate in nL"/>
            <param argument="dest_plate_dead_volume" type="integer" value="15000" label="dead volume to add in the destination plate in nL"/>
            <param argument="dest-starting_well" type="text" value="A1" label="starter well of destination plate to begin filling the 384 well-plate"/>
            <param argument="src-starting_well" type="text" value="A1" label="starter well of source plate to begin filling the 384 well-plate" />
            <param argument="output-format" type="data" format="csv" label="Output file format"/>
            <param argument="nplicate" type="integer" value="3" label="numbers of copies of volume sets"/>
            <param argument="keep-nil-vol" type="boolean" truevalue="keep-nil-vol" falsevalue="" checked="ture" label="Keep nil volumes in instructions or not"/>
            <param argument="source_plate_well_capacity" type="integer" value="60000" label="Maximum volume capacity of the source plate in nL" />
            <param argument="dest_plate_well_capacity" type="integer" value="60000" label="Maximum volume capacity of the dest plate in nL" />
            <param argument="optimize-well-volumes" label="Save volumes in source plate for all factors"/>
            <param argument="plate-dimensions" label="Dimensions of plate separated by a 'x'"/>
        </section>
    </inputs>
    <outputs>
        <data name="source_plate" format="json" label="Source plate(s) description(s)" />
        <data name="destination_plate" format="json" label="Destination plate(s) description(s)" />
        <data name="volumes_summary" format="csv" label="Pameters volumes summary" />
    </outputs>
    <tests>
        <tests>
            <!-- test 1: check if identical outputs are produced with default parameters  -->
        </tests>
    </tests>
    <help><![CDATA[
Plates Generator
=====
This module generates a list of source and destination plates according to the set of samples to test.

Input
-----
Required:
TBD

Advanced options:
TBD

Output
------
TBD

Project Links
---------------------
* `GitHub <https://github.com/brsynth/icfree-ml/tree/main/icfree/plates_generator>`_

License
-------
* `MIT <https://github.com/brsynth/icfree-ml/blob/main/LICENSE>`_

    ]]></help>
    <creator>
        <person givenName="Yorgo" familyName="El Moubayed" email="yorgo.el-moubayed@inrae.fr" />
        <person givenName="Joan" familyName="HÃ©risson" email="joan.herisson@univ-evry.fr" identifier="https://orcid.org/0000-0001-9741-0847" />
    </creator>
    <citations>
    </citations>
</tool>




