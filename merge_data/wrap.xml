<tool id="merge_data" name="Merge single dataset with collection" version="@TOOL_VERSION@">
    <description>Rank heterologous pathways according to their global score</description>
    <macros>
        <token name="@TOOL_VERSION@">1.0.0</token>
    </macros>
    <stdio>
        <regex match="WARNING" level="warning" />
        <regex match="ERROR" level="fatal" />
    </stdio>
    <command detect_errors="exit_code"><![CDATA[
        #set out_folder="out_folder"
        mkdir -p '$out_folder';
        #for $input in $pathway_collection.keys():
            ln -sf $pathway_collection[$input] '$out_folder/${input}.xml';
        #end for
        #if $input_single_sbml
            ln -sf '$input_single_sbml' '$out_folder/${input_single_sbml.name}.xml';
        #end if
        ##rm -fr '$input_folder';
    ]]></command>
    <inputs>
        <param name="input_single_sbml" type="data" format="sbml" label="Single SBML" optional="true" />
        <param name="pathway_collection" type="data_collection" format="sbml" collection_type="list" label="Pathways Collection" />
    </inputs>
    <outputs>
        <collection name="merged_data" type="list" format="sbml" label="SBML Collection">
            <discover_datasets pattern="__designation_and_ext__" directory="out_folder" />
        </collection>
    </outputs>

    <help><![CDATA[
Merge data
================

    ]]></help>
</tool>