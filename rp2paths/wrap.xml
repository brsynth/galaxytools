<tool id="rp2paths" name="RP2paths" version="1.5.0">
    <description>Enumerate and seperate the different pathways generated by RetroPath2.0</description>
    <requirements>
        <requirement type="package" version="1.5.0">rp2paths</requirement>
    </requirements>
	<stdio>
        <regex match="TIMEOUT:" level="fatal" />
        <regex match="ERROR:"   level="fatal" />
		<regex match="WARNING:" level="warning" />
	</stdio>
    <command detect_errors="exit_code"><![CDATA[
        mkdir out &&
        python -m rp2paths all
        '$rp2_pathways'
        --outdir out
        --timeout '$adv.timeout' &&
        if test -f "out/compounds.txt"; then
          cp out/compounds.txt '$compounds';
          cp out/out_paths.csv '$master_pathways';
        fi
    ]]></command>
    <inputs>
        <param name="rp2_pathways" type="data" format="csv" label="RetroPath2.0 Pathways" />
        <section name="adv" title="Advanced Options" expanded="false">
			<param name="timeout" type="integer" value="1800" label="Time Out" />
        </section>
    </inputs>
    <outputs>
        <data name="master_pathways" format="csv" label="${tool.name} (Pathways)" />
        <data name="compounds" format="tsv" label="${tool.name} (Compounds)" />
    </outputs>
    <tests>
        <test>
            <!-- test 1: check if identical outputs are produced with default parameters  -->
            <param name="rp2_pathways" value="retropath2_pathways.csv" />
            <output name="master_pathways" file="rp2paths_pathways.csv" ftype="csv" compare="diff"/>
            <output name="compounds" file="rp2paths_compounds.tsv" ftype="tsv" compare="diff"/>
        </test>
    </tests>
    <help><![CDATA[
rp2paths
========


RP2paths extracts the set of pathways that lies in a metabolic space file output by the RetroPath2.0 workflow. Source code may be found at the following location: `GitHub <https://github.com/brsynth/rp2paths>`_.

Input
-----

Required information:


* **rp_results**\ : (string) Path to the ReatroPath2.0 pathways file

Advanced options:


* **timeout**\ : (string, default: 30 minutes) Time out time of the tool
* **server_url**\ : (string) IP address of the rp2paths REST service

Output
------


* **out_paths**\ : (string) Path to the RP2paths pathways. Describes all the indiviudal enumerated pathways that produce the compound of interest.
* **out_compounds**\ : (string) Path to the RP2paths Compounds. Describes the structure of all the chemical species involved in all pathways.

Versioning
----------

v1.4.3

Authors
-------


* **Melchior du Lac**
* Thomas Duigou
* Baudoin Delépine
* Pablo Carbonell

License
-------

`MIT <https://github.com/brsynth/rp2paths/blob/master/LICENSE.md>`_

Acknowledgments
---------------


* Joan Hérisson

    ]]></help>
    <citations>
        <citation type="bibtex">
@article{delepine2018retropath2,
  title={RetroPath2.0: a retrosynthesis workflow for metabolic engineers},
  author={Del{\'e}pine, Baudoin and Duigou, Thomas and Carbonell, Pablo and Faulon, Jean-Loup},
  journal={Metabolic engineering},
  volume={45},
  pages={158--170},
  year={2018},
  publisher={Elsevier}}
        </citation>
    </citations>
</tool>